# JobSentinel v2.0.0 Release Notes

**Release Date:** January 17, 2026

---

## Overview

**v2.0.0 is a major security release** that introduces OS-native keyring integration for
secure credential storage. All sensitive credentials (API keys, passwords, webhook URLs,
session cookies) are now stored in the operating system's secure credential manager instead
of plain text configuration files.

This is a **breaking change** for credential storage, with automatic migration provided for existing users.

---

## Key Features

### OS-Native Keyring Integration

All sensitive credentials are now stored in secure OS credential managers:

| Platform | Credential Manager |
|----------|-------------------|
| macOS | Keychain |
| Windows | Windows Credential Manager |
| Linux | Secret Service (GNOME Keyring, KWallet) |

### Credentials Secured

The following credentials have been migrated to secure storage:

| Credential | Used By |
|------------|---------|
| `smtp_password` | Email notifications |
| `telegram_bot_token` | Telegram notifications |
| `slack_webhook_url` | Slack notifications |
| `discord_webhook_url` | Discord notifications |
| `teams_webhook_url` | Teams notifications |
| `linkedin_session_cookie` | LinkedIn job scraper |

### New Tauri Commands

5 new commands for credential management:

```typescript
// Store a credential
await invoke("store_credential", { key: "slack_webhook_url", value: "https://..." });

// Retrieve a credential
const webhook = await invoke<string | null>("retrieve_credential", { key: "slack_webhook_url" });

// Delete a credential
await invoke("delete_credential", { key: "smtp_password" });

// Check if credential exists
const hasWebhook = await invoke<boolean>("has_credential", { key: "slack_webhook_url" });

// Get all credential statuses
const status = await invoke<Record<string, boolean>>("get_credential_status");
```

---

## Migration

### Automatic Migration

When JobSentinel v2.0 starts for the first time, it automatically migrates any plaintext credentials from your config file to the secure keyring:

1. Detects credentials in `config.json`
2. Stores each credential in the OS keyring
3. Marks migration as complete
4. Credentials remain in config file (for rollback safety)

### Post-Migration Cleanup

After verifying the migration was successful, you can remove plaintext credentials from `config.json`:

```json
{
  "alerts": {
    "slack": {
      "enabled": true,
      "webhook_url": ""  // Safe to leave empty
    },
    "email": {
      "smtp_password": ""  // Safe to leave empty
    }
  }
}
```

---

## Technical Details

### New Module: `core/credentials/`

New credentials module with secure storage abstraction:

```rust
pub enum CredentialKey {
    SmtpPassword,
    TelegramBotToken,
    SlackWebhookUrl,
    DiscordWebhookUrl,
    TeamsWebhookUrl,
    LinkedInSessionCookie,
}

pub struct CredentialStore {
    fn store(&self, key: CredentialKey, value: &str) -> Result<()>;
    fn retrieve(&self, key: CredentialKey) -> Result<Option<String>>;
    fn delete(&self, key: CredentialKey) -> Result<()>;
    fn has(&self, key: CredentialKey) -> bool;
}
```

### Dual-Access Pattern

- **Frontend**: Uses `tauri-plugin-secure-storage` via Tauri commands
- **Backend**: Uses `keyring` crate directly for notification senders and scrapers

### Dependencies Added

```toml
tauri-plugin-secure-storage = "1.4"
keyring = { version = "3", features = [
    "apple-native",
    "windows-native",
    "sync-secret-service"
]}
```

---

## Breaking Changes

### Config Field Changes

The following fields in `config.json` are now ignored (credentials stored in keyring):

- `alerts.email.smtp_password`
- `alerts.telegram.bot_token`
- `alerts.slack.webhook_url`
- `alerts.discord.webhook_url`
- `alerts.teams.webhook_url`
- `linkedin.session_cookie`

### Validation Changes

Config validation no longer checks for credential presence. Credentials are validated at runtime when fetching from keyring.

---

## Settings UI Updates

The Settings page has been updated with:

- **Credential status indicators** - Shows ✅ or ⚠️ for each credential
- **Separate credential state** - Credentials managed independently from config
- **Save to keyring** - Credentials saved directly to OS keyring on form submit

---

## Test Updates

14 tests updated for new credential validation behavior:

- Validation tests now expect success (credentials validated at runtime)
- LinkedIn scraper tests expect skipped behavior when no keyring cookie
- All 1963 tests passing

---

## Documentation

- **New:** [docs/security/KEYRING.md](../security/KEYRING.md) - Comprehensive keyring documentation
- **Updated:** [CHANGELOG.md](../../CHANGELOG.md)
- **Updated:** [docs/ROADMAP.md](../ROADMAP.md)
- **Updated:** [docs/developer/ARCHITECTURE.md](../developer/ARCHITECTURE.md)
- **Updated:** [docs/features/notifications.md](../features/notifications.md)

---

## Upgrade Path

1. **Backup your config** - `cp config.json config.json.backup`
2. **Install v2.0** - Standard installation
3. **Launch app** - Automatic migration runs on first start
4. **Verify credentials** - Check Settings page for status indicators
5. **Optional cleanup** - Remove plaintext credentials from config file

---

**Full Changelog:** [CHANGELOG.md](../../CHANGELOG.md#200---2026-01-17)
