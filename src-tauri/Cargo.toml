[package]
name = "jobsentinel"
version = "1.0.0"
description = "Privacy-first job search automation for Windows 11+"
authors = ["Chad Boyd"]
license = "MIT"
repository = "https://github.com/cboyd0319/JobSentinel"
keywords = ["job-search", "automation", "privacy", "tauri", "desktop-app"]
categories = ["command-line-utilities"]
edition = "2021"

[features]
default = []
gcp = []
aws = []

[build-dependencies]
tauri-build = { version = "2", features = [] }

[dependencies]
# Tauri Core
tauri = { version = "2", features = ["tray-icon"] }
tauri-plugin-shell = "2"
tauri-plugin-notification = "2"
tauri-plugin-dialog = "2"
tauri-plugin-secure-storage = "1.4"

# Direct keyring access for Rust backend (same crate used by plugin)
keyring = { version = "3", features = ["apple-native", "windows-native", "sync-secret-service"] }

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Async Runtime
tokio = { version = "1.42", features = ["full"] }
async-trait = "0.1"

# HTTP Client
reqwest = { version = "0.12", features = ["json", "rustls-tls"] }
url = "2.5"

# HTML Parsing
scraper = "0.21"

# URL encoding for query parameters
urlencoding = "2.1"

# Regular expressions for pattern matching
regex = "1.10"

# Database
sqlx = { version = "0.8", default-features = false, features = ["runtime-tokio-rustls", "sqlite", "migrate", "chrono", "macros"] }

# Date/Time
chrono = { version = "0.4", features = ["serde"] }

# Configuration
dotenvy = "0.15"

# Error Handling
thiserror = "2.0"
anyhow = "1.0"

# UUIDs
uuid = { version = "1.11", features = ["v4"] }

# Logging
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# SHA-256 for job hashing
sha2 = "0.10"
hex = "0.4"

# Lazy initialization for shared resources
once_cell = "1.19"

# Platform directories
dirs = "5.0"

# Email notifications (SMTP)
lettre = { version = "0.11", default-features = false, features = ["tokio1-rustls-tls", "builder", "smtp-transport"] }

# PDF parsing for resume extraction
pdf-extract = "0.7"
docx-rs = "0.4"

[target.'cfg(windows)'.dependencies]
windows = { version = "0.58", features = ["Win32_Foundation", "Win32_System_Threading"] }

[dev-dependencies]
tempfile = "3.13"
proptest = "1.5"
wiremock = "0.6"
futures = "0.3"

# Release profile with security hardening
[profile.release]
# Enable link-time optimization for smaller, faster binaries
lto = "thin"
# Strip debug symbols to reduce binary size and prevent reverse engineering
strip = "symbols"
# Single codegen unit for better optimization (at cost of compile time)
codegen-units = 1
# Abort on panic instead of unwinding (smaller binary, prevents info leaks)
panic = "abort"
# Enable overflow checks even in release builds
overflow-checks = true

[lints.rust]
unsafe_code = "deny"

[lints.clippy]
pedantic = { level = "warn", priority = -1 }
nursery = { level = "warn", priority = -1 }
# Allow expect/unwrap in tests via #[cfg(test)] allow attributes
# These are denied in production code
unwrap_used = "warn"
expect_used = "warn"
